---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import type { CollectionEntry } from "astro:content";

async function getPostById(sections: CollectionEntry<'post'>[], wantedId: string) {
  let entry = sections.find(e => e.id === wantedId);
  if (!entry) throw new Error(`Content not found for ${wantedId}`);
  const rendered = await entry.render();
  return rendered.Content;
}

export async function getStaticPaths() {
  const langs =  ['de', 'en'];
  return langs.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;

const sections = await getCollection('post');
console.log(sections);
const About = await getPostById(sections, `${lang}/about.md`);
---

<BaseLayout title="Home" lang={lang}>
	<About />
</BaseLayout>