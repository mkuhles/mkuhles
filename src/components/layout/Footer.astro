---
import type { NavEntry, LocaleNav, LocalesIndex } from "../../types/NavItem.ts";
import type { Language }  from "../../types/Language.ts";
import Navigation from "./Navigation.astro";

import nav from '../../data/footernav.json';
import locales from '../../data/locales/index.js';

interface Props {
    lang: Language["key"];
}

const {lang} = Astro.props;

const locale = (locales as LocalesIndex)[lang] ?? (locales as LocalesIndex).de;
const localeNav = (nav as NavEntry[]).map((item) => {
    const t = (locale.nav as LocaleNav)[item.id];
    return { title: t?.title ?? item.id, href: t?.href ?? item.slug, target: t?.target ?? "" };
});

const currentYear = new Date().getFullYear();
---

<footer>    
    <div>  <p>Â© {currentYear} Melanie Kuhles</p></div>
    <Navigation className="footer-nav" lang={lang} navItems={localeNav} />
</footer>