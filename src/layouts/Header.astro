---
import type { NavEntry, LocaleNav, LocalesIndex } from "../types/NavItem.ts";
import type { Language }  from "../types/Language.ts";
import Navigation from "../components/layout/Navigation.astro";

import nav from '../data/nav/navigation.json';
import locales from '../data/locales/index.js';
import Section from "./Section.astro";

interface Props {
    pageTitle: string;
    lang: Language["key"];
}

const {lang} = Astro.props;

const locale = (locales as LocalesIndex)[lang] ?? (locales as LocalesIndex).de;
const localeNav = (nav as NavEntry[]).map((item) => {
    const t = (locale.nav as LocaleNav)[item.id];
    return { title: t?.title ?? item.id, href: t?.href ?? item.slug, target: t?.target ?? "" };
});
---

<header>
    <Section type="header">
        <div class="logo__wrapper">
            <a href="/mkuhles">
                <img src="/mkuhles/images/logo.svg" alt="Website Logo" />
            </a>
        </div>
        <Navigation className="header-nav" lang={lang} navItems={localeNav} /> 
    </Section>
</header>
